<!doctype html>
<html lang="en">
  <head>
    <base href="/elements/outline-designer/demo/">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <title>OutlineDesigner: outline-designer Demo</title>
    <script>
      window.process = window.process || {
        env: {
          NODE_ENV: "production"
        }
      };
    </script>
    <script type="module">
      import "@haxtheweb/wc-autoload/wc-autoload.js";
      window.addEventListener('haxcms-ready', function(e) {
        // give the web components a second to build
        setTimeout(async () => {
          // use this for items from a HAXcms site
          //document.querySelector('outline-designer').items = window.HAXCMS.instance.store.getManifestItems(true);

          // get items from example import
          await fetch(import.meta.url + '/../example.json').then((resp) => (resp.ok) ? resp.json() : []).then((data) => {document.querySelector('outline-designer').items = data;});

          // hide content operations
          //document.querySelector('outline-designer').hideContentOps = true;
        }, 2000);
      });
    </script>
    <script src="../../../node_modules/@haxtheweb/deduping-fix/deduping-fix.js"></script>

    <style>
      haxcms-site-builder,
      haxcms-site-editor-ui {
        display: none !important;
      }
      body {
        overflow: scroll !important;
      }
      /*outline-designer {
        --outline-designer-lock-visibility: hidden;
      }*/
    </style>
  </head>
  <body>
    <outline-designer></outline-designer>
    <haxcms-site-builder file="https://haxtheweb.org/site.json"></haxcms-site-builder>
    <!-- Reverse engineer of build.js based on what's needed to test locally -->
    <script>
      window.__appCDN="./node_modules/";window.__appForceUpgrade=false;
      window.WCAutoloadRegistryFile = "../../haxcms-elements/demo/wc-registry.json";
      window.WCAutoloadBasePath = "/node_modules/";
      window.WCGlobalBasePath = "/node_modules/";
      // set this in order to simulate the published form of the site
      //window.HAXCMSContext="published";
      // set the below to simulate running a demo / end points to load data
      // this will let you simulate more operations without having a backend
      window.HAXCMSContext="demo";
      window.appSettings = {
        "createNodePath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/createNodePath.json",
        "saveOutlinePath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/saveNode.json",
        "saveManifestPath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/saveManifestPath.json",
        "getSiteFieldsPath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/getSiteFieldsPath.json",
        "deleteNodePath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/saveNode.json",
        "saveNodePath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/saveNode.json",
        "getUserDataPath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/userData.json",
        "login": "..\/..\/haxcms-elements\/demo\/dist\/dev\/login.json",
        "refreshUrl": "..\/..\/haxcms-elements\/demo\/dist\/dev\/refreshUrl.json",
        "logout": "..\/..\/haxcms-elements\/demo\/dist\/dev\/logout.json",
        "connectionSettings": "..\/..\/haxcms-elements\/demo\/dist\/dev\/connectionSettings.json",
        "publishSitePath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/saveNode.json",
        "revertSitePath": "..\/..\/haxcms-elements\/demo\/dist\/dev\/saveNode.json",
        "getFieldsToken": "adskjadshjudfu823u823u8fu8fij",
        "appStore": {
          "url": "..\/..\/haxcms-elements\/demo\/dist\/dev\/appstore.json"
        },
        "jwt": "made-up-thing",
        // add your custom theme here if testing locally and wanting to emulate the theme selector
        // this isn't really nessecary though
        "themes": { 
          "haxcms-dev-theme": { 
            "element": "haxcms-dev-theme", 
            "path": "@haxtheweb/haxcms-elements/lib/haxcms-dev-theme.js", 
            "name": "Developer theme"
          }
        }
      };
    </script>
  </body>
</html>
